(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{665:(e,r,t)=>{Promise.resolve().then(t.bind(t,7282))},1868:(e,r,t)=>{"use strict";t.d(r,{A:()=>o,AuthProvider:()=>d});var s=t(5155),a=t(2115),l=t(2099),i=t(9323);let n=(0,a.createContext)({user:null,profile:null,loading:!0,signOut:async()=>{},refreshProfile:async()=>{},resetProfile:async()=>{}}),o=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},d=e=>{let{children:r}=e,[t,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[u,h]=(0,a.useState)(!0),x=async e=>{var r,t;let s=(null==(r=e.user_metadata)?void 0:r.full_name)||(null==(t=e.user_metadata)?void 0:t.name)||void 0;return await i.E.ensureProfile(e.id,e.email,s)};(0,a.useEffect)(()=>{(async()=>{let{data:{session:e}}=await l.N.auth.getSession();if((null==e?void 0:e.user)&&e.user.email){let r={id:e.user.id,email:e.user.email,user_metadata:e.user.user_metadata};o(r),c(await x(r))}h(!1)})();let{data:{subscription:e}}=l.N.auth.onAuthStateChange(async(e,r)=>{if((null==r?void 0:r.user)&&r.user.email){let e={id:r.user.id,email:r.user.email,user_metadata:r.user.user_metadata};o(e),c(await x(e))}else o(null),c(null);h(!1)});return()=>e.unsubscribe()},[]);let g=async()=>{t&&c(await i.E.getProfile(t.id))},m=async()=>{t&&c(await i.E.resetProfile(t.id))},b=async()=>{await l.N.auth.signOut(),o(null),c(null)};return(0,s.jsx)(n.Provider,{value:{user:t,profile:d,loading:u,signOut:b,refreshProfile:g,resetProfile:m},children:r})}},2099:(e,r,t)=>{"use strict";t.d(r,{N:()=>i});var s=t(5647);let a="https://gbljleyzspkuflqwsalf.supabase.co",l="sb_publishable_OLCFA9uKB3KcBWsuIZc9_g_KIbzMAsU";if(!a||!l)throw Error("Missing Supabase environment variables");let i=(0,s.UU)(a,l,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},2573:(e,r,t)=>{"use strict";t.d(r,{$:()=>n});var s=t(5155),a=t(2115),l=t(2596),i=t(9688);let n=a.forwardRef((e,r)=>{let{className:t,variant:a="primary",size:n="md",children:o,...d}=e;return(0,s.jsx)("button",{className:function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,i.QP)((0,l.$)(r))}("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-500 dark:bg-blue-600 dark:text-white dark:hover:bg-blue-700",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus-visible:ring-gray-500 dark:bg-slate-700 dark:text-white dark:hover:bg-slate-600",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus-visible:ring-gray-500 dark:border-slate-600 dark:bg-slate-800 dark:text-white dark:hover:bg-slate-700",ghost:"text-gray-700 hover:bg-gray-100 focus-visible:ring-gray-500 dark:text-gray-300 dark:hover:bg-slate-700"}[a],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[n],t),ref:r,...d,children:o})});n.displayName="Button"},7282:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>b});var s=t(5155),a=t(2115),l=t(5695),i=t(1868),n=t(2099),o=t(2573),d=t(9946);let c=(0,d.A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),u=(0,d.A)("chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]),h=(0,d.A)("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),x=(0,d.A)("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),g=()=>{let[e,r]=(0,a.useState)(!1),[t,l]=(0,a.useState)(null),[i,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{l(null)},[]);let g=async e=>{r(!0),l(null);try{let{error:r}=await n.N.auth.signInWithOAuth({provider:e,options:{redirectTo:"".concat(window.location.origin,"/onboarding")}});r&&(r.message.includes("OAuth provider not enabled")?l("".concat(e," OAuth provider is not configured. Please enable it in your Supabase dashboard.")):l(r.message))}catch(e){l("An unexpected error occurred")}finally{r(!1)}},m=async()=>{d(!0),l(null);try{await n.N.auth.signOut(),await new Promise(e=>setTimeout(e,1e3)),d(!1)}catch(e){l("Failed to reset authentication state"),d(!1)}};return(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"V\xe4lkommen till Svenska Snabbt"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Learn Swedish in just 30-60 minutes a day"})]}),t&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:t}),(0,s.jsx)(o.$,{onClick:m,disabled:i,className:"ml-2 text-red-600 hover:text-red-800 p-1",variant:"ghost",children:(0,s.jsx)(c,{className:"w-4 h-4 ".concat(i?"animate-spin":"")})})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(o.$,{onClick:()=>g("google"),disabled:e||i,className:"w-full bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 flex items-center justify-center space-x-3",children:[(0,s.jsx)(u,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Continue with Google"})]}),(0,s.jsxs)(o.$,{onClick:()=>g("facebook"),disabled:e||i,className:"w-full bg-blue-600 hover:bg-blue-700 text-white flex items-center justify-center space-x-3",children:[(0,s.jsx)(h,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Continue with Facebook"})]}),(0,s.jsxs)(o.$,{onClick:()=>g("twitter"),disabled:e||i,className:"w-full bg-black hover:bg-gray-800 text-white flex items-center justify-center space-x-3",children:[(0,s.jsx)(x,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Continue with Twitter"})]})]}),(0,s.jsx)("div",{className:"text-center text-sm text-gray-500",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})]})};function m(){let{user:e,loading:r,profile:t}=(0,i.A)(),o=(0,l.useRouter)(),d=(0,l.useSearchParams)(),[c,u]=(0,a.useState)(null),[h,x]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{let e=async()=>{var e,r;let t=window.location.hash;if(t&&t.includes("access_token")){x(!0);try{window.history.replaceState({},"","/"),await new Promise(e=>setTimeout(e,1e3));let{data:r,error:t}=await n.N.auth.getSession();if(t){console.error("Error getting session:",t),u("Failed to complete authentication. Please try again."),x(!1);return}if(null==(e=r.session)?void 0:e.user){let{data:e}=await n.N.from("profiles").select("*").eq("id",r.session.user.id).single();e&&e.job_type&&e.swedish_level?o.push("/dashboard"):o.push("/onboarding")}else u("Authentication failed. Please try again."),x(!1)}catch(e){console.error("Error processing OAuth callback:",e),u("Failed to process authentication. Please try again."),x(!1)}}else{let{data:e}=await n.N.auth.getSession();if(null==(r=e.session)?void 0:r.user){let{data:r}=await n.N.from("profiles").select("*").eq("id",e.session.user.id).single();r&&r.job_type&&r.swedish_level?o.push("/dashboard"):o.push("/onboarding")}}},r=d.get("error"),t=d.get("error_description");if(r){let e="Authentication failed";"invalid_request"===r&&(null==t?void 0:t.includes("bad_oauth_state"))?e="Authentication session expired. Please try signing in again.":"auth_error"===r?e=t||"Authentication failed. Please try again.":"unexpected_error"===r?e="An unexpected error occurred. Please try again.":t&&(e=t.replace(/\+/g," ")),u(e);let s=new URL(window.location.href);s.search="",window.history.replaceState({},"",s.toString())}else e()},[d,o]),(0,a.useEffect)(()=>{!e||r||h||(t&&t.job_type&&t.swedish_level?o.push("/dashboard"):o.push("/onboarding"))},[e,r,t,h,o]),r||h)?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:h?"Completing authentication...":"Loading..."})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-900 dark:to-slate-800",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-12",children:[(0,s.jsxs)("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6",children:["Learn Swedish",(0,s.jsx)("span",{className:"text-blue-600 dark:text-blue-400 block",children:"in Minutes a Day"})]}),(0,s.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-8 max-w-2xl mx-auto",children:"Perfect for busy professionals. Customized lessons based on your job and current level. Start speaking Swedish confidently in just 30-60 minutes daily."})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-8 mb-12",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-slate-700",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center mb-4",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Quick Daily Lessons"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Bite-sized lessons designed for busy schedules. Learn in just 30-60 minutes a day."})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-slate-700",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center mb-4",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2V6"})})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Workplace Focused"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Learn vocabulary and phrases relevant to your profession. From tech to healthcare."})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-slate-700",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center mb-4",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Smart Learning"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Adaptive lessons that adjust to your progress. Start from your current level."})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8 border border-gray-200 dark:border-slate-700",children:[c&&(0,s.jsx)("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),c]})}),e&&t&&t.job_type&&t.swedish_level?(0,s.jsx)("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg text-lg transition-colors duration-200",onClick:()=>o.push("/dashboard"),children:"Continue learning"}):(0,s.jsx)(g,{})]}),(0,s.jsx)("div",{className:"text-center mt-12",children:(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:"500+"}),(0,s.jsx)("div",{className:"text-gray-600 dark:text-gray-300",children:"Comprehensive Lessons"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mb-2",children:"15 min"}),(0,s.jsx)("div",{className:"text-gray-600 dark:text-gray-300",children:"Average Daily Study Time"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mb-2",children:"95%"}),(0,s.jsx)("div",{className:"text-gray-600 dark:text-gray-300",children:"Success Rate"})]})]})})]})})})}function b(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading..."})]})}),children:(0,s.jsx)(m,{})})}},9323:(e,r,t)=>{"use strict";t.d(r,{E:()=>a});var s=t(2099);let a={async getProfile(e){try{let{data:r,error:t}=await s.N.from("profiles").select("*").eq("id",e).single();if(t){if("PGRST116"===t.code)return null;throw t}return r}catch(e){return console.error("Error fetching profile:",e),null}},async createProfile(e){try{let{data:r,error:t}=await s.N.from("profiles").insert(e).select().single();if(t)throw t;return r}catch(e){return console.error("Error creating profile:",e),null}},async updateProfile(e,r){try{let{data:t,error:a}=await s.N.from("profiles").update(r).eq("id",e).select().single();if(a)throw a;return t}catch(e){return console.error("Error updating profile:",e),null}},async upsertProfile(e){try{let{data:r,error:t}=await s.N.from("profiles").upsert(e).select().single();if(t)throw t;return r}catch(e){return console.error("Error upserting profile:",e),null}},async ensureProfile(e,r,t){let s=await this.getProfile(e);return s||(s=await this.createProfile({id:e,email:r,full_name:t||null,job_type:null,swedish_level:null})),s},async signOut(){console.log("Sign out requested")},async getUserProgress(e){try{let{data:r,error:t}=await s.N.from("user_progress").select("*").eq("user_id",e);if(t)throw t;return r||[]}catch(e){return console.error("Error fetching user progress:",e),[]}},async saveLessonProgress(e){try{let{data:r,error:t}=await s.N.from("user_progress").upsert({user_id:e.user_id,lesson_id:e.lesson_id,completed:e.completed||!1,score:e.score||0,completed_at:e.completed?new Date().toISOString():null}).select().single();if(t)throw t;return r}catch(e){return console.error("Error saving lesson progress:",e),null}},async getAuthToken(){try{let{data:{session:e}}=await s.N.auth.getSession();return(null==e?void 0:e.access_token)||null}catch(e){return console.error("Error getting auth token:",e),null}},async resetProfile(e){try{let{data:r,error:t}=await s.N.from("profiles").update({job_type:null,swedish_level:null}).eq("id",e).select().single();if(t)throw t;return r}catch(e){return console.error("Error resetting profile:",e),null}}}}},e=>{e.O(0,[647,84,441,964,358],()=>e(e.s=665)),_N_E=e.O()}]);